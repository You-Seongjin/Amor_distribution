<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.amor.ticketingSQL">

<select id = "ticketingHistoryList" parameterType="Integer" resultType="Map">
<![CDATA[
select 
c.movie_name,c.movie_poster,b.ticketing_num,b.ticketing_seat,
b.ticketing_screeningtime,b.playing_movie_idx,b.ticketing_reservetime,
b.ticketing_payment,b.ticketing_price  
from playing_movie a,
(select * from ticketing where member_idx = #{useridx} and ticketing_state = 'y') b ,
movie c
where a.playing_movie_idx = b.playing_movie_idx and 
a.movie_idx = c.movie_idx
]]>

</select>
</mapper>